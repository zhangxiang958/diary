# node

今天终于可以把 rebase 解释清楚了! 惭愧.
为什么不能在公共的分支上进行 rebase 操作 ? 核心的原因在于 rebase 会将之前的 commit hash 新生成一遍. rebase 的本质是将需要衍合分支上的 commit 从与
当前分支最近祖先 commit 起的所有 commit 重新在当前分支做一遍.既然是重新做一遍, 那么 commit hash 肯定会改变的.这个操作就很不妙, 因为比如说你是在 master 分支上做 rebase, 
通俗地说, 你是在将 master 上的 commit 移到 feature 分支的后面, 也就是说祖先元素之后的 commit 其实都是新的提交, 这样的操作在公共分支上是非常危险的, 比如原本 master 上的
1 commit 很多人基于这个 commit 开展了很多工作, 然后你在 master 分支上做了 rebase, 1 就变成了 1', 之前的 1 就不见了, 这样别人在开发的时候就会非常困惑.
另外, 由于 commit hash 值不同了, 但是别人或者远程仓库都保留着之前的 1 commit, 改变的只是你自己本地 master 1 commit, 变成了 1', 所以在你提交的时候, 因为 commit hash 已经
不同, git 会认为这是一个新的提交, 然后像新的 commit 一样提交到仓库里面, 这样可以说 master 分支已经分叉了, 因为别人的 master 分支和你的已经不一样了, 而且即使没有冲突发生,
当你查看 git 历史的时候会发现很困扰就是 1 和 1' 做的操作, 内容, 时间, 操作者都是一样的, 但是就是 commit hash 不同被看作两个 commit, 这样 git 历史其实已经混乱了, 而且后续
别人基于这样的历史进行开发并不能担保不会出现问题, 因为本身历史就是乱套的.所以这就是为什么不要在公共分支上做 rebase 操作.
又有一个疑问, 所谓的公共分支是指什么, 多人协作就是公共分支吗? 并不是, 我觉得公共分支是指共同的主分支, 会有很多分支的主分支才是公共分支, 假如你有一个 feature 分支并在上面开发,
你还有其他同事一起在这个分支上开发, 这个时候 feature 并不能算公共分支, 而相反在这样的 feature 分支上做 rebase 是被提倡的, 比如同事新提交了几个 commit, 你也有几个分支需要提交,
那么你只需要 git fetch, 然后 git rebasse, 意思就是将你的 commit 移到远程的同事已经提交的 commit 后面, 对没错, 我说的就是使用 git fetch + git rebase 代替 git fetch + 
git merge, 也就是常用的 git pull. 这样做的好处是保证分支的历史的整洁性, 保持线性提交记录, 保持清爽.