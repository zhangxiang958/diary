# node

CDN 与反向代理的原理是类似的, 就是通过缓存, 如果有缓存就不请求真正的源, 直接返回数据.反向代理属于前端架构.
分层概念, 消费者服务器挂掉之后, 生产者还是可以继续处理请求响应, 将数据先放到消息队列中暂存.而且只要存入消息队列, 就可以返回响应, 另外如果并发突然变大, 也可以将多出来
的访问放入消息队列, 那样就可以 hold 住多的并发.
部署两台以上的服务器是为了高可用性. 数据库还需要定期备份存档保存.
自动化是很重要的, 像同构就需要自动化降级, 如果访问量过大, 就需要将渲染方式变为 CSR.
IO 可能遇到的问题: IO 会遇到不足值的情况, 不足值就是例如如果要读 50 字节的数据, 那么如果只有 20 字节的数据, 那么就会返回 20 的不足值.不过像在磁盘读或写不会遇到不足值.
其实 node 的 api 非常像 unix 底层的 io api. stats, isDir 等等.
共享文件: 每个进程有独立的描述符表, 表项是由进程打开的文件描述符索引.索引指向文件表, 文件表由所有进程共享, 记录文件位置等信息, v-node 记录也是由所有进程共享, 并且记录文件详细信息.
IO 重定向是将标准输入输出与磁盘文件链接起来.
标准 IO 库会将一个打开的文件模型化为一个流, 流就是一个指向类型为 FILE 类型的指针.stdin, stdout, stderr. 类型为 FILE 的流是对文件描述符和流缓冲区的抽象.
像标准 IO 库都是利用 unix 底层 io 函数封装的.
unix i/o 是在系统底层实现的, 程序可以通过 read, close, open, write, lseek 来访问.